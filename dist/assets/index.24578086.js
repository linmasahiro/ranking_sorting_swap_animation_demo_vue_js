import{d as m,r as _,o as h,a as l,c as u,F as g,b as y,e as i,t as f,f as v,g as k}from"./vendor.7e50b6dd.js";const D=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}};D();async function w(e){return await new Promise((o,r)=>{try{fetch(e).then(n=>n.json()).then(n=>{o(n)})}catch(n){console.log("Fetch error",n),r()}})}async function E(e,o){return await new Promise(r=>{let n=Math.floor(Math.random()*e.length),t=Math.floor(Math.random()*1e3),s=0,a=setInterval(()=>{s++;let c=s/60;e[n].showScore=e[n].score+Math.floor(t*c),c===1&&(clearInterval(a),e[n].score=e[n].showScore,r(e))},o/60)})}async function I(e){let o;return await new Promise(r=>{for(let n=e.length-1;n>=0;n--)for(let t=n-1;t>=0;t--)e[n].score>e[t].score&&(o=e[t],e[t]=e[n],e[n]=o);r(e)})}function b(e,o,r){requestAnimationFrame(()=>{e.style.transform="translateY("+o+"px)",e.style.transition="transform 0s",requestAnimationFrame(()=>{e.style.transform="",e.style.transition="transform "+r+"ms"})})}var S=(e,o)=>{const r=e.__vccOpts||e;for(const[n,t]of o)r[n]=t;return r};const d=200,B=m({name:"App",components:{},setup(){let e=_({rankingData:[],streamerEl:[]});return h(()=>{e.streamerEl=[]}),w("./testData.json").then(o=>{o.forEach(r=>{r.showScore=r.score}),e.rankingData=o}),setInterval(()=>{E(e.rankingData,d).then(()=>{let o=[];e.rankingData.forEach(r=>{o[r.userID]=e.streamerEl[r.userID].getBoundingClientRect().top}),I(e.rankingData).then(r=>{r.forEach(n=>{let t=e.streamerEl[n.userID].getBoundingClientRect().top,a=o[n.userID]-t;a&&b(e.streamerEl[n.userID],a,d)})})})},d),{state:e}}}),F={class:"ranking-no"},A={class:"picture"},L=["src"],M={class:"display-name"},P={class:"score"};function R(e,o,r,n,t,s){return l(),u("div",null,[(l(!0),u(g,null,y(e.state.rankingData,(a,c)=>(l(),u("div",{key:a.userID,ref:p=>{e.state.streamerEl[a.userID]=p},class:"streamer"},[i("div",F,f(c+1),1),i("div",A,[i("img",{src:a.picture},null,8,L)]),i("div",M,f(a.displayName),1),i("div",P,f(a.showScore),1)],512))),128))])}var T=S(B,[["render",R],["__scopeId","data-v-5f22f659"]]);const N={setup(e){return(o,r)=>(l(),v(T))}};k(N).mount("#app");
